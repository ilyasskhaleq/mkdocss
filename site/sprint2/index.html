<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../img/favicon.ico">
    <title>Sprint 2 &mdash; Ilyass Khaleq Mansourui</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css">
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link rel="stylesheet" href="../css/extra.css">
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script> 
</head>

<body ontouchstart="">
    <div id="container">
        <aside>
            <div class="home">
                <div class="title">
                    <button class="hamburger"></button>
                    <a href=".." class="site-name"> Ilyass Khaleq Mansourui</a>
                </div>
                <div class="search">
                    <div role="search">
    <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
        <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
    </form>
</div>
                </div>
            </div>
            <nav class="nav">
                <ul class="root">
                    <li class="toctree-l1"><a class="nav-item" href="../introduccio/">Introducción</a></li>
                    <li class="toctree-l1"><button class="section nav-item">Ubuntu</button>
<ul class="subnav">
    <li class="toctree-l2 current"><a class="nav-item current" href="./">Sprint 2</a>
<ul class="subnav">
<li class="toctree-l3"><a class="nav-item toc" href="#gestio-de-processos">Gestió de processos</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#gestio-dusuaris-i-grups">Gestió d’usuaris i grups</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#gestio-de-permisos">Gestió de permisos</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#sistemes-de-fitxers-i-particions">Sistemes de fitxers i particions</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#copies-de-seguretat-i-automatitzacio-de-tasques">Còpies de seguretat i automatització de tasques</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#quotes-de-disc">quotes de disc</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#copies-de-seguretat-i-automatitzacio-de-tasques_1">Còpies de seguretat i automatització de tasques</a></li>
</ul></li>
    <li class="toctree-l2">
<a class="nav-item" href="../sprint3/">Sprint 3</a></li>
</ul></li>
                </ul>
            </nav>
            <div class="repo">
    <div class="previous"><a href="../introduccio/">&laquo; Previous</a></div>
    <div class="next"><a href="../sprint3/">Next &raquo;</a></div>
</div>
        </aside>
        <div id="spacer"><button class="arrow"></button></div>
        <main>
            <div class="home-top">
                <button class="hamburger"></button>
                <a href=".." class="site-name"> Ilyass Khaleq Mansourui</a>
            </div>
            <div id="main">
                <nav class="breadcrumbs">
<ul>
    <li>Ubuntu</li>
</ul>
</nav>
                <div id="content"><h1 id="sprint-2">Sprint 2</h1>
<h2 id="gestio-de-processos">Gestió de processos</h2>
<h3 id="top">TOP</h3>
<p>Aqquesta comanda monitoriotza a temps real tots els procesos que s'executen en el sistema.
<img alt="Comanda" src="../imatges/imatge130.png" />
<img alt="Comanda" src="../imatges/imatge131.png" /></p>
<h3 id="pstree">pstree</h3>
<p>Mostra una representació en forma d'arbre dels procesoss que se estan executan a temps real.
<img alt="Comanda" src="../imatges/imatge132.png" /></p>
<h3 id="ps-aux">ps aux</h3>
<p>Es una llista de tots els procesos e s'executen en el sistema a temps real i podem observar que tenen mes informació sobre cada proces.
<img alt="Comanda" src="../imatges/imatge133.png" />
<img alt="Comanda" src="../imatges/imatge134.png" /></p>
<h3 id="ctrl-c">Ctrl + C</h3>
<p><code>Ctrl + C</code> s'utilitza per parar un proces en el terminal, per exemple si estem fent un ping i cliquem les tecles Ctrl + C detenim el proces.</p>
<p>En aquest cas com no tinc conexió a internet se me ha quedat buscant un ping que no pot trobar i al fer Ctrl + C he interrumpit el proces.
<img alt="Comanda" src="../imatges/imatge135.png" /></p>
<h3 id="ctrl-z">Ctrl + Z</h3>
<p>Es quasi igual al procés anterior, pero en aquest cas es per suspendre el proces i parar-lo temporalment.</p>
<p><img alt="Comanda" src="../imatges/imatge136.png" /></p>
<h3 id="jobs">jobs</h3>
<p>Aquesta comnada es la que ens enseña tots els procesos que estan segon plà, com en el cas anterior al fer Ctrl + Z , gràcies a esta comanda podem veure quins prpcesos estan parats temporalment.</p>
<p>Aqui podem comprovar amb el procés anterior i també he fet un altre ping i ho he supes temporalment per a que suritgue la llista que la componen dos pings parats temporalment.
<img alt="Comanda" src="../imatges/imatge137.png" />
<img alt="Comanda" src="../imatges/imatge138.png" /></p>
<h3 id="fg">fg %</h3>
<p>Esta comanda s'utilitza per tornar a posar en marxa una comanda que està suspesa amb la comanda anterior.
Com abans he fet un jobs i he creat com una llista que la componen 2 ping i ara el que farem es que gracies a esta comanda podrem pasar a primer pla el treball anterior.</p>
<p><img alt="Comanda" src="../imatges/imatge139.png" /></p>
<h3 id="kill-9-pid">kill -9 PID</h3>
<p>Amb aquesta comanda podrem parar un procés amb el seu PID. la comanda seria la següent:</p>
<ul>
<li><code>kill -9 (PID)</code></li>
</ul>
<p>Ara farem un <code>ps aux</code> per veure tots els processos i seleccionarem un.</p>
<p><img alt="Comanda" src="../imatges/imatge140.png" /></p>
<p><img alt="Comanda" src="../imatges/imatge142.png" /></p>
<p>Podem observar que el proces 5480 ya no es.</p>
<p><img alt="Comanda" src="../imatges/imatge141.png" /></p>
<h2 id="gestio-dusuaris-i-grups">Gestió d’usuaris i grups</h2>
<h3 id="fitxers-de-configuracio">Fitxers de configuració</h3>
<p>Aquest fitxers són importants a tindrels en compte ja que les seues funcions son essencials.</p>
<h4 id="passwd"><strong>/PASSWD</strong></h4>
<p>El fitxer <strong>/etc/passwd</strong> conté informació bàsica sobre els usuaris del sistema, com els noms dels usuaris, identificadors i altres opcions que fan que el sistema funcioni perfectament.
<img alt="Comanda" src="../imatges/imagen.png" />
Aquí podem veure els usuaris i les seves informacions basiques.
<img alt="Comanda" src="../imatges/imatge2.png" /></p>
<p>Si volem modificar el fitxer utilitzem aquesta comanda:
<img alt="Comanda" src="../imatges/imatge3.png" />
Llavors ens apereixeria aquest fitxer:
<img alt="Comanda" src="../imatges/imatge4.png" /></p>
<h4 id="group"><strong>/GROUP</strong></h4>
<p>Es un fitxer de comfiguració essencial que defineix els grups i la seva relació amb els usuaris.S’utilitza per controlar els permisos dels usuaris i l’accés als recursos.Aquí es podria visualitzar els diferents grups amb el seu GID particular.
<img alt="Comanda" src="../imatges/imatge5.png" />
<img alt="Comanda" src="../imatges/imatge6.png" />
Per modificar aquest fitxer utilitzem aquesta comanda.
<img alt="Comanda" src="../imatges/imatge7.png" />
<img alt="Comanda" src="../imatges/imatge8.png" /></p>
<h4 id="shadow"><strong>/SHADOW</strong></h4>
<p>Aquest fitxer conté informació encriptada de les contrasenyes dels usuaris i configuracions de seguretat. nomes es pot accedir pel usuari root ja que es protegeixen les contrasenyes. 
<img alt="Comanda" src="../imatges/imatge9.png" />
<img alt="Comanda" src="../imatges/imatge10.png" />
Per modificar el fitxer s'utilitza aquesta comanda.
<img alt="Comanda" src="../imatges/imatge11.png" />
<img alt="Comanda" src="../imatges/imatge12.png" /></p>
<h4 id="gsahdow"><strong>GSAHDOW</strong></h4>
<p>Aquest fitxer és similar al anterior però en aquest cas està fet per a la gestió de grups.
<img alt="Comanda" src="../imatges/imatge13.png" />
<img alt="Comanda" src="../imatges/imatge14.png" />
Per modificar aquest fitxer:
<img alt="Comanda" src="../imatges/imatge15.png" />
<img alt="Comanda" src="../imatges/imatge16.png" /></p>
<h4 id="logindefs"><strong>/LOGIN.DEFS</strong></h4>
<p>Aquest fitxer proporciona valors predeterminats  a les comandes “useradd” “passwd” i “login” facilitant la configuració per als usuaris.
<img alt="Comanda" src="../imatges/imatge17.png" />
<img alt="Comanda" src="../imatges/imatge18.png" />
Per modificar el fitxer:
<img alt="Comanda" src="../imatges/imatge19.png" />
<img alt="Comanda" src="../imatges/imatge20.png" /></p>
<h4 id="defaultuseradd"><strong>/DEFAULT/USERADD</strong></h4>
<p>Aquest fitxer conté configuracions predeterminades per a quan es crea un nou usuari amb la comanda useradd.
<img alt="Comanda" src="../imatges/imatge21.png" />
<img alt="Comanda" src="../imatges/imatge22.png" />
Per accedir al document es en aquesta comanda.
<img alt="Comanda" src="../imatges/imatge23.png" />
<img alt="Comanda" src="../imatges/imatge24.png" /></p>
<h4 id="adduserconf-i-deluserconf"><strong>/ADDUSER.CONF</strong> I  <strong>/DELUSER.CONF</strong></h4>
<p>Són fitxers que controlen el comportament de les eines adduser i deluser. Son molt mes completes que useradd i userdel.
<img alt="Comanda" src="../imatges/imatge25.png" />
<img alt="Comanda" src="../imatges/imatge26.png" /></p>
<h4 id="skel"><strong>/SKEL</strong></h4>
<p>Aquest fitxer conté una plantilla i directoris predeterminats que se copien directament al directori de <strong>home</strong> dels nous usuaris quan es creen amb la comanda <strong>Useradd</strong>.
Informacio Adicional: Tots aquests arxius que es troben dins de skel, per a poder visualitzar-los tenim que fer un <code>ls -la</code>.</p>
<p>Per poder accedir al directori es en aquesta comanda i ja podem observar que estem dins.
<img alt="Comanda" src="../imatges/imatge35.png" /></p>
<p>Ara que ja estem dins del directori fem un ls -la i observem els arxius que tenim.
<img alt="Comanda" src="../imatges/imatge36.png" /> </p>
<p>Poedem observar que tenim 3 documents amb permisos root.</p>
<p><strong>.profile</strong>: Aquest fitxer s'executa quan el usuari inicia la sessió.S'utilitza principalment per establir configuracions.</p>
<p>Ara que ja hem aprés que realitzen cada un d'aquests arxius podem fer una prova del seu funcionament.</p>
<p><img alt="Comanda" src="../imatges/imatge37.png" /> 
<img alt="Comanda" src="../imatges/imatge38.png" /> 
En el arxiu .profile hem modificat que la carpeta home de l'usuari en vex de crearse en el /home s'ha de crear en el /var.</p>
<p><strong>.bashrc</strong>:Es carrega a cada sessió, en aquest arxiu es poden definir funcions i varbiales de l'entorn personalitzades.
<img alt="Comanda" src="../imatges/imatge39.png" />
<img alt="Comanda" src="../imatges/imatge40.png" />
La modificació que hem realitzat ha segut sobre una comanda, es a dir, que aun fem escribem "connexió" es farà un <code>ls -la</code>.</p>
<p><strong>.Bash_logout</strong>: Aquest fitxer s'executa quan el usuari tanca la sessió. Conté ordres per netejar recursos o finalitzar processos. 
<img alt="Comanda" src="../imatges/imatge41.png" />
<img alt="Comanda" src="../imatges/imatge42.png" />
En aquest fitxer he agregat la comanada que he subratllat en la imatge. Aquesta comanada  elimina tots els arxius dins del directori "Baixades" del usuri actual quan es tanca la sessió . <strong>S'executa quan la sessió se tanca.</strong>  </p>
<h3 id="administracio-dusuaris">Administració d'Usuaris</h3>
<h3 id="agregar-usuaris">Agregar usuaris</h3>
<h4 id="useradd"><strong>useradd</strong></h4>
<ul>
<li>Comando básico de gestión de usuarios en sistemas Linux</li>
<li>No realiza configuraciones automáticas ni pasos adicionales.</li>
<li>Al usar useradd, es necesario especificar manualmente:<ul>
<li>El directorio home.</li>
<li>Los grupos.</li>
<li>La shell.</li>
<li>Otras configuraciones, si no se desean los valores predeterminados.</li>
</ul>
</li>
<li>Ideal para usuarios avanzados que necesitan personalizar todos los aspectos de las cuentas de usuario.</li>
</ul>
<p>Ara le afegim una contrasenya al usuari.
<img alt="Comanda" src="../imatges/imatge44.png" /></p>
<p>Seguidament le afegim una Shell.
<img alt="Comanda" src="../imatges/imatge45.png" /></p>
<p>Finalment comprovem que hem cambiat la contrasenya i la shell. 
Per verificar que si hem creat el usuari utilitzem el fitxers que he expplicat abans i també en la interficie gràfica.
<img alt="Comanda" src="../imatges/imatge46.png" />
<img alt="Comanda" src="../imatges/imatge47.png" />
<img alt="Comanda" src="../imatges/imatge43.png" /></p>
<h4 id="adduser"><strong>adduser</strong></h4>
<ul>
<li>És un script en Perl que fa servir internament <code>useradd</code>.</li>
<li>Ofereix una interfície més senzilla i configura automàticament diversos paràmetres per defecte:<ul>
<li>Crea el directori <code>home</code> de manera automàtica.</li>
<li>Assigna un grup per defecte.</li>
<li>Demana una contrasenya durant el procés.</li>
</ul>
</li>
<li><strong>Més fàcil i pràctic</strong> per a usuaris que volen crear comptes sense haver de definir cada paràmetre manualment.</li>
</ul>
<p>Prova:
Podem veure que ens demana contrasenya i que ens crea el directori home de forma automatica i ens assigna a un grup per defecte
<img alt="Comanda" src="../imatges/imatge48.png" />
Aqui podem comprovar que estan tot creat i que no fa falta que el creem nosaltes.
<img alt="Comanda" src="../imatges/imatge49.png" /></p>
<h3 id="eliminar-usuaris">Eliminar Usuaris</h3>
<p>Per eliminar un usuari utilizem la comanda<code>deluser (nom usuari)</code></p>
<h4 id="deluser"><strong>Deluser</strong></h4>
<p>Al fer aquesta comanda, nomes eliminem el usuari pero deixem els arxius del usuari i altres.</p>
<p>Per eliminar un usuari es en aquesta comanda.
<img alt="Comanda" src="../imatges/imatge27.png" />
Comprovem que s’ha borrat, podem observar que ja no es veu el l'usuari.
<img alt="Comanda" src="../imatges/imatge28.png" /></p>
<p>Per borrar els arxius necessitem fer altres comandes.</p>
<p>Per eliminar també el seu directori hem de fer la comanda <code>deluser --remove-home (nom usuari)</code> </p>
<h3 id="agregar-i-eliminar-grups">Agregar i eliminar grups</h3>
<h4 id="groupadd"><strong>Groupadd</strong></h4>
<p>Creem el grup classe i verifiquem que esta en el fitxer /etc/group.
<img alt="Comanda" src="../imatges/imatge31.png" />
<img alt="Comanda" src="../imatges/imatge32.png" /></p>
<p>Per afegir un usuari a un grup hem de fer aquesta comanda. 
<code>usermod -aG nom_grup nom_usuari</code>
<img alt="Comanda" src="../imatges/imatge50.png" /></p>
<p>Ara per eliminar el usuari del grup, utilitxem aquesta comanda:
<code>gpasswd -d nom_usuari nom_grup</code>
<img alt="Comanda" src="../imatges/imatge51.png" /></p>
<h4 id="delgroup"><strong>Delgroup</strong></h4>
<p>Ara eliminem el grup i verifiquem si esta borrat.
<img alt="Comanda" src="../imatges/imatge52.png" /></p>
<p>Aqui podem veure que el grup classe ja no existeix.</p>
<p><img alt="Comanda" src="../imatges/imatge53.png" /></p>
<h3 id="personalitzacio-dusuaris">Personalització d'usuaris</h3>
<p>Ara ja que tenim una mica de idea sobre creació d'usuaris, anirem a modificar les comandes <code>adduser</code> <code>useradd</code>
En primer lloc modificarem la comanda <strong>adduser</strong>
<img alt="Comanda" src="../imatges/imatge54.png" /></p>
<p>Hem modificat aquestes punts:
* DHOME=/home a DHOME=/tmp: les carpetes "home" no es crearan en la carpeta home sino que en "/tmp"
* #SKEL=/etc/skel a SKEL=/etc/skel: es a dir hem llevat el hastag de comanetari ja que no he feia efecte.
* FIRT_UID=1000 a FIRT_UID=2000: aqui cambiem el numero per defecte del usuari a 2000.
* FIRST_GID=1000 a FIRST_GID=2000: Es la mateixa que la anterior pero en aquest cas es sobre grups.
Ara comprovem el canvis.</p>
<p><img alt="Comanda" src="../imatges/imatge55.png" /></p>
<p>Finalment per acabar amb aquest apartat nem a modificar la comanda <strong>useradd</strong>
En aquest arxiu no fa falta cambiar parametres ja que com hem de fer nosaltres el canvis manualment.
<img alt="Comanda" src="../imatges/imatge56.png" /></p>
<h2 id="gestio-de-permisos">Gestió de permisos</h2>
<p>En primer lloc, es impresendible saberse com es la taula de persmisos en forma binaria: 
<img alt="Comanda" src="../imatges/imatge57.webp" /></p>
<p>En primer lloc creem 4 usuaris (verd,groc,roig,blau) i un grup(parchis), afegim verd i blau al grup parchis i l'usuari groc al grup sudo.
<img alt="Comanda" src="../imatges/imatge59.png" /></p>
<p><img alt="Comanda" src="../imatges/imatge60.png" />
<img alt="Comanda" src="../imatges/imatge61.png" /></p>
<p>Aqui podem visualitzar els permisos dels usuaris que hem creat.
<img alt="Comanda" src="../imatges/imatge62.png" /></p>
<h3 id="pemisos-normlas">Pemisos normlas</h3>
<p><strong>chgrp</strong></p>
<p>En primer lloc crearem una carpeta proves i dins tambe crearem un arxiu "hola" dins del usuari "groc"
<img alt="Comanda" src="../imatges/imatge63.png" /></p>
<p>Ara cambiarem els permisos a la carpeta proves, es a dir, modificarem els permisos posant-la en el grup parchis. 
<img alt="Comanda" src="../imatges/imatge64.png" /></p>
<p>Aquesta comanda 
<code>chgrp -R parchis proves/</code> en aquest cas, la comanda mou tot el que es troba dins de la carpeta al mateix destí.</p>
<p><strong>chmod</strong></p>
<p>En aquest cas canbien els permisos al grup i usuaris.
<code>chmod -R proves</code>: en aquesta imatge podem observar els canvis que hem realitzat.
<img alt="Comanda" src="../imatges/imatge65.png" /></p>
<p><strong>Comprovacions dels permisos donats</strong></p>
<p><strong>Usuari Groc(sudo)</strong></p>
<p>En la següent imatge podem comprovar que podem fer un ls -l i tambe podem accedir dins de la carpeta.
<img alt="Comanda" src="../imatges/imatge66.png" /></p>
<p><strong>Usuari Verd i blau</strong></p>
<p>En aquests 2  usuaris com estan al mateix grup tenen els mateixos permisos i  podem accedir dins de la carpeta pero no podem crear cap arxiu ni borrar.
<img alt="Comanda" src="../imatges/imatge67.png" /></p>
<p><strong>Usuari Roig</strong></p>
<p>En aquest cas no podem accedir ni a la carpeta.
<img alt="Comanda" src="../imatges/imatge68.png" /></p>
<h3 id="permisos-especials">Permisos Especials</h3>
<p>En aquest punt, volem crear una carpeta i que els diferents usuaris puguin fer determinades funcions amb els permisos que s'els  otorga a cadascú
<img alt="Comanda" src="../imatges/imatge69.png" /></p>
<p><strong>Sticky</strong>
Donar uns deteminats permisos com poden llegir,  crear i tot pero no poden borra els fitxers dels altres només els seus.</p>
<p><img alt="Comanda" src="../imatges/imatge71.png" /></p>
<p><strong>Comprovaciopns</strong></p>
<p><strong>Roig</strong>
Crearem dos arxius dins de la carpeta i borrarem un i podem observar que si que el podem borrar i deixarem el altre per comprovar si el podem borrar en altres usuaris.</p>
<p><img alt="Comanda" src="../imatges/imatge72.png" /></p>
<p><strong>Verd</strong></p>
<p>Ara comprovem el usuari verd. I podem observar que podem crear pero no podem borrar.</p>
<p><img alt="Comanda" src="../imatges/imatge73.png" /></p>
<p><strong>getfacl</strong></p>
<p>Aquesta comanda permet veure coses extra sobre la carpeta sabre els seus permisos.</p>
<p><img alt="Comanda" src="../imatges/imatge74.png" /></p>
<p><strong>setfacl</strong></p>
<p>Aquesta comanmda ens permet fer exepcions.Tenim diferenets parametres.</p>
<p><strong>-m</strong></p>
<p>Aqui podem comprovar que hem fet la exepció.
<img alt="Comanda" src="../imatges/imatge75.png" /></p>
<p><strong>-b</strong></p>
<p>Serveix per eliminar tootes les exepcions.
<img alt="Comanda" src="../imatges/imatge76.png" /></p>
<p><strong>-x</strong></p>
<p>Elimina les exepcions sobre un usuari en concret.</p>
<p><img alt="Comanda" src="../imatges/imatge77.png" /></p>
<h3 id="permisos-umask">Permisos UMASK</h3>
<p><strong>Què és la mascara de permisos?</strong></p>
<p>La màscara de permisos (Umask) és un valor que defineix quins permisos es retiraran per defecte quan es creen nous fitxers o directoris.Això assegura que els fitxers no tinguin permisos massa amplis.</p>
<p>Per saber quina mascara tenim fem aquesta comanda:</p>
<p><img alt="Comanda" src="../imatges/imatge78.png" /></p>
<p><strong>Funcionament de la Màscara</strong></p>
<p>La màscara de permisos (umask) defineix quins permisos es retiren per defecte quan es crea un nou fitxer o directori. Això es fa mitjançant una operació lògica AND entre els permisos predeterminats i la màscara negada.</p>
<p>Permisos predeterminats
* Fitxers: 666 (lectura i escriptura per a tots els usuaris).
* Directoris: 777 (lectura, escriptura i execució per a tots els usuaris).</p>
<p>Fem la operació AND per a donar permisos a un usuari per un directori.</p>
<p><img alt="Comanda" src="../imatges/imatge79.png" /></p>
<p>En surt el numero que hem de assignar.</p>
<p><strong>Canvair UMASK</strong></p>
<p>Per canviar tenim dos formes; temporal i difinitiva.</p>
<p><strong>Temporal</strong></p>
<p>S'utilitza aquesta comanda:</p>
<p><img alt="Comanda" src="../imatges/imatge80.png" /></p>
<p><strong>Difinitiva</strong></p>
<p>Per cambiar de forma difinitiva ho hem de fer en el fitxer <strong>/etc/login.defs</strong></p>
<p><img alt="Comanda" src="../imatges/imatge81.png" /></p>
<p><strong>Comprovació</strong></p>
<p>Ara crearem un nou usuari per comprovar la modificació i podem veure que se ha modificat correctament.</p>
<p><img alt="Comanda" src="../imatges/imatge82.png" />
<img alt="Comanda" src="../imatges/imatge83.png" />
Per finalitzar Umask és util per establir permisos predeterminats de manera temporal o permanent.</p>
<h2 id="sistemes-de-fitxers-i-particions">Sistemes de fitxers i particions</h2>
<p><strong>Estructura de la informació</strong></p>
<p><strong>mida sector</strong></p>
<p>Unitat mínima fisica on es guarden le sdades i la minima es 512 bytes pero el sistema no treballa en  sectors, treballa en blocs. la mida del sector no es pot cambiar ja que ve predefinida desde fabrica</p>
<p><strong>mida block</strong></p>
<p>Es la unitat lògica del sistema operatiu on es guarden les dades per defecte. La mida block es pot canviar quan formatem la mida sector. </p>
<p><strong>fragmentacio interna</strong></p>
<p>Quan és tot aquell espai desaprofitat dels blocs que no s'acaben de plenar.
Es pot disminuir la mida del bloc pero tindrem el problema de baixada del rendiment.
També es una bona solució que es aumentar el tamany del blocs pero empitjorem la fragmentació interna molt.</p>
<p><strong>frammentació externa</strong></p>
<p>La fragmentació externa és un problema que es produeix a la memòria quan l'assignador deixa seccions de blocs de memòria no utilitzats entre parts de la memòria assignada.</p>
<p>Un bloc fragmentat externament encara està disponible per a l'assignador, però només si es necessita memòria que pugui cabre dins d'aquest bloc. El bloc aïllat no es pot utilitzar per a necessitats de memòria més grans i no es pot reagrupar amb la memòria lliure total.</p>
<p><strong>Solució</strong></p>
<p>La solució principal per reduir la fragmentació externa és la desfragmentació, que reorganitza els blocs de memòria per agrupar l'espai lliure i fer-lo més útil per a futures assignacions.</p>
<p><strong>Creació de particions i formats</strong></p>
<p><strong>Tipus de formateig</strong></p>
<ul>
<li>
<p><strong>Baix Nivell</strong></p>
</li>
<li>
<p>Es realitza a nivell físic del disc.</p>
</li>
<li>Divideix el disc en sectors i pistes que poden ser reconeguts pel maquinari.</li>
<li>
<p>És un procés que es fa en fàbrica i rarament es necessita fer manualment.</p>
</li>
<li>
<p><strong>Rapid Nivell</strong></p>
</li>
<li>
<p>Esborra només la taula d'assignació de fitxers (FAT) o l'índex del sistema de fitxers.</p>
</li>
<li>Les dades encara existeixen físicament al disc, però ja no són accessibles fàcilment.</li>
<li>
<p>És molt més ràpid que el formateig complet.</p>
</li>
<li>
<p><strong>Mig nivell</strong></p>
</li>
<li>
<p>Defineix el sistema de fitxers que s'utilitzarà a la partició .</p>
</li>
<li>Configura la partició per emmagatzemar dades segons el sistema operatiu i el tipus d'ús.</li>
</ul>
<p><strong>Sistemes de fitxers</strong></p>
<p><strong>Creació de particions i formateig</strong></p>
<p>Els sistemes de fitxers són els encarregats d’organitzar i gestionar les dades.</p>
<p>Creem un disc:</p>
<p><img alt="Comanda" src="../imatges/imatge84.png" /></p>
<p>Fem aquesta comanda <code>fdisk -l</code> aixi podem visualitzar tota la informació.
<img alt="Comanda" src="../imatges/imatge85.png" /></p>
<p>Ara que ja saben que el disc en el que volem treballar es <strong>sdc</strong> nem a accedir a ell.</p>
<p><img alt="Comanda" src="../imatges/imatge86.png" /></p>
<p><code>fdisk /dev/sdc</code> amb aquesta comanda podem accedir al disk especificat.
 Poseu la lletra n per realitzar la partició, i procedim a clicar enter ja que volem tot predeterminat.</p>
<p><img alt="Comanda" src="../imatges/imatge87.png" /></p>
<p>I per a comprovar que hem una partició, tornem a realitzar la comanda  <code>fdisk -l</code>.</p>
<p><img alt="Comanda" src="../imatges/imatge88.png" /></p>
<p>Ara procedim a fer el formateig de la partició i modifiquem el tamany del bloc.</p>
<p><img alt="Comanda" src="../imatges/imatge89.png" /></p>
<p>Podem observar que hem fet el canvi correctament del bloc i el formateig.</p>
<p><img alt="Comanda" src="../imatges/imatge90.png" /></p>
<h3 id="muntatge-de-les-particions">Muntatge de les particions**</h3>
<h4 id="temporal"><strong>Temporal</strong></h4>
<p>Les particions temporals s'utilitzen per dividir un espai de manera provisional i poden ser desmuntades fàcilment. </p>
<p>Per a realitzar muntatges temporals es important fer aquests pasos.</p>
<p>En primer lloc, entrem al directori /var i creem una crapeta particio1 i 
<img alt="Comanda" src="../imatges/imatge92.png" /></p>
<p>Dins de la carpeta creem un arxiu .txt. Realitzem aquesta comanda <code>mount -t ext4 /dev/sdc1 /var/particio1</code> i al fer un <code>ls</code> podem comprovar el que hem fet. I per desmuntar fem la comanda <code>umount -t ext4 /dev/sdc1 /var/particio1</code> i ja estaria desmontat.
<img alt="Comanda" src="../imatges/imatge91.png" /></p>
<p>Creem un añtre fitxer per a un futur.
<img alt="Comanda" src="../imatges/imatge93.png" /></p>
<p>Fem un <code>reboot</code>(en la captura esta mal posat) i al reiniciar podem comprovar que ja no el trobem ja que es <strong>temporal</strong>.
<img alt="Comanda" src="../imatges/imatge94.png" /></p>
<p><img alt="Comanda" src="../imatges/imatge95.png" /></p>
<h4 id="difinitiu"><strong>Difinitiu</strong></h4>
<p>Per realitxar el muntatge Difinitiu hem de modificar el arxiu /etc/fstab amb les següents modificacions.</p>
<p><img alt="Comanda" src="../imatges/imatge96.png" /></p>
<p>Ara al fer un <code>reboot</code> encara tenim el muntatge fet ja que aquesta es la forma difinitiva.</p>
<p><img alt="Comanda" src="../imatges/imatge97.png" /></p>
<p>Aqui podem comprobar que els canvis se han realitzat correctament.</p>
<p><img alt="Comanda" src="../imatges/imatge98.png" /></p>
<h3 id="comparticio-de-la-carpeta-en-xarxa"><strong>comparticio de la carpeta en Xarxa.</strong></h3>
<p>Tenim diferents formes per a compartir fitxers en la mateixa xaraxa, Nosaltres hem provar <strong>Nautilus</strong> <strong>samba</strong></p>
<h4 id="nautilus"><strong>Nautilus</strong></h4>
<p>En primer lloc, instal·larem Nautilus amb la següent comanda.
<img alt="Comanda" src="../imatges/imatge99.png" /></p>
<p>Ara entrem a la carpera /var/ i fem clic dret a la carepta que hem creat i posem a la opció de "opcions de comparticio"
<img alt="Comanda" src="../imatges/imatge100.png" /></p>
<p>Podem observar que amb aquesta forma no ens funiona, per això utilitzarem la opció de <strong>Samba</strong>
<img alt="Comanda" src="../imatges/imatge101.png" /></p>
<h4 id="samba"><strong>Samba</strong></h4>
<p>Com que la opció anterior no ens ha funcionat, provarem aquseta per si ens funciona...</p>
<p>Intsallem SAMBA amb la comanda següent.(Virtual Box) Cal recalcar que es possible que ya estigue instal·lada.</p>
<p><img alt="Comanda" src="../imatges/imatge102.png" /></p>
<p>Modifiquem el següent arxiu <code>/etc/samba/smb.conf</code></p>
<p><img alt="Comanda" src="../imatges/imatge103.png" /></p>
<p>Fem la següent comanda per Reiniciar el servei que gestiona la comparticiode fitxers i autinticació d'usuaris(smbd) i per reinicia el servei que gestiona el servei de noms i la descoberta de recursos en la xarxa(nmbd).</p>
<p><img alt="Comanda" src="../imatges/imatge104.png" /></p>
<p>Cambiem els persmisos per que tots els usuaris puguin tenir les mateioxes opcions sobre la carpeta, amb la següent comanda.</p>
<p><img alt="Comanda" src="../imatges/imatge105.png" /></p>
<p>Creem el ususari que hem posat anteriorment al modificar el arxiu <code>/etc/samba/smb.conf</code> per a no tenir problemes proximament.
<img alt="Comanda" src="../imatges/imatge106.png" /></p>
<p>Utilitzem la següent comanda per a que altres usuaris puiguin accedir als recursos compartits configurats a traves de SAMBA.
<img alt="Comanda" src="../imatges/imatge107.png" /></p>
<p>En el meu cas he posat (Adaptador pont) pero no me ha funcionat i he posat (Adaptador nomes d'amfitrio) i he provat la conexió i me ha funionat.
<img alt="Comanda" src="../imatges/imatge108.png" /></p>
<p><img alt="Comanda" src="../imatges/imatge112.png" /></p>
<p>Cambiem a l'opció Usuari registrat i posem el nom d'usuari i la seva contraseña i ja ens connectat.
<img alt="Comanda" src="../imatges/imatge109.png" /></p>
<p>Creem una carpeta o arxiu, que en aquest es una carpeta, per provar la connexió.
<img alt="Comanda" src="../imatges/imatge110.png" /></p>
<p>Ara nem a la VM i entrem a la carpeta i fem un <code>ls -l</code> per veure les propietats i podem veure que el que la ha creat es l'usuari platano.
<img alt="Comanda" src="../imatges/imatge111.png" /></p>
<h4 id="creacio-de-particions-i-formatacio-en-nfts-guia-per-ubuntu-i-windows"><strong>Creació de Particions i Formatació en NFTS: Guia per Ubuntu i Windows</strong></h4>
<p>En aquest cas farem l'exercici adicional que es compartir un directori formatat amb NTFS.<strong>Cal aclarir que no he pogut solucionar els errors que me ha donat</strong></p>
<p>Creem i muntem un directori
<img alt="Comanda" src="../imatges/imatge112.png" /></p>
<p>Creem un directori que volem que apareixe en el dispositiu windows.
<img alt="Comanda" src="../imatges/imatge113.png" /></p>
<p>Cambiem el fitxer<code>/etc/fstab</code> amb les següents dades.
<img alt="Comanda" src="../imatges/imatge114.png" /></p>
<p>Seguidament modifiquem <code>/etc/samba/smb.conf</code>
<img alt="Comanda" src="../imatges/imatge115.png" /></p>
<p>També cambiem els permisos per a que tots tinguen els mateixos permisos i tambe reseteigem el smbd i nmbd.
<img alt="Comanda" src="../imatges/imatge115.png" /></p>
<p><strong>Finalment al voler fer la connexió per a conectarme en el sistema operatiu windows hem dona el problema de error de connexió</strong></p>
<p><img alt="Comanda" src="../imatges/imatge117.png" /></p>
<h2 id="copies-de-seguretat-i-automatitzacio-de-tasques">Còpies de seguretat i automatització de tasques</h2>
<h2 id="quotes-de-disc">quotes de disc</h2>
<h3 id="que-son-les-quotes-de-disc">Que són les quotes de disc?</h3>
<p>Les quotes de disc són un mecanisme utilitzat en sistemes operatius per controlar i limitar l'espai d'emmagatzematge que un usuari o grup pot utilitzar en un sistema de fitxers. Això és especialment útil en entorns multiusuari, com ara servidors o sistemes compartits, per evitar que un usuari ocupi tot l'espai disponible al disc dur i afecti altres usuaris o el rendiment general del sistema.</p>
<h3 id="com-funcionen-les-quotes-de-disc">Com funcionen les quotes de disc?</h3>
<p>Les quotes es configuren per usuari o grup en un sistema de fitxers específic.
Els administradors poden establir:
* Límits per fitxers: Nombre màxim de fitxers que un usuari pot crear (també conegut com a límit d'inodes).
* Límits per espai: Quantitat màxima d'espai que pot utilitzar un usuari en megabytes (MB), gigabytes (GB), etc.
Les quotes es controlen mitjançant eines del sistema operatiu, com ara:
* quota o edquota en Linux.
* Funcions integrades en Windows Server.</p>
<h3 id="exercici-practic">Exercici practic</h3>
<p>En primer lloc, Intsal·lem "quota".
<img alt="Comanda" src="../imatges/imatge118.png" /></p>
<p>Creem una nova particio amb la comanda <code>fdisk /dev/sdc</code> i prenem la tecla n per crear la partició. Al fer la comanada <code>fdisk -l</code> podem verificar que hem fet la partició.
<img alt="Comanda" src="../imatges/imatge119.png" /></p>
<p>Modifiquem el arxiu <strong>/etc/fstab</strong> i posem els següents parametres:</p>
<ul>
<li>defaults, usrquota i grpquota: per a que habiliti les quotes per a usuaris i grups. 
<img alt="Comanda" src="../imatges/imatge120.png" /></li>
</ul>
<p>Com ja sabem, al modificar aquest arxiu, hem de reiniciar.</p>
<p><strong>Important: Si modifiquem mal el arxiu no podrem reiniciar el sistema i ho hem de arreglar manual</strong></p>
<p>En segon lloc, activem les quotes en un directori amb les següents comandes<code>quotacheck -cug /mnt/dades</code> i despres <code>quotaon /mnt/dades</code> i ho verifiquem aml la comanda <code>ls -la</code>
<img alt="Comanda" src="../imatges/imatge122.png" /></p>
<p>En el meu cas, es important fer aquestos pasos sinò, no es podra fer el munstatge. es fer un formateig amb el format <strong>ext4</strong> i despres fer un muntatge com hem fet abans.
<img alt="Comanda" src="../imatges/imatge121.png" /></p>
<p>Crem l'usuari per poder fer proves.</p>
<p>Nem a la carpeta /mnt/ i realitxem aquesta comanda<code>edquota -u usuari1</code>per editar manualment les quotes assignades a un usuari. Nosaltres modificarem aquests dos parametres.</p>
<ul>
<li>blando: indica el limit que l'usuari pot exedir durant el periode.</li>
<li>duro: Es el límit maxim que no pot exedir l'usuari.</li>
</ul>
<p><img alt="Comanda" src="../imatges/imatge1231.png" /></p>
<p><img alt="Comanda" src="../imatges/imatge123.png" /></p>
<p>Es important cambiar el persmisos del directori, per a poder crear arxius desde altres usuaris.</p>
<p><strong>Ara intentarem sobrepasar el limit del que hem modificat en el arxiu de <code>edquota -u usuari1</code></strong></p>
<p>Amb la següent comanda <code>dd if=/dev/zero of=test bs=1K count=800</code> creem arxius amb un fitxer d'entrada que en aquest cas es /dev/zero, que genera zeros contínuament. També hem especificat el nom del arxiu i finalment diem quina mida volem que tingue l'arxiu que sera de uns 800Kb.</p>
<p>Podem observar que hem creat 3 fitxers correctament, però, al ultim fitxer he tingut l'error que voliem que es que hem sobrepassat el limit d'espai.</p>
<p><img alt="Comanda" src="../imatges/imatge124%2B.png" /></p>
<p>Ara ja sabem quin es el límit, borrem els 4 arxius creats i nem a fer-ho de forma grafica descargant imatges amb bona resolució.
He descargat una imatge amb una mida de 887 Kb i he provat de sobrepassar el limit.</p>
<p><img alt="Comanda" src="../imatges/imatge127.png" /></p>
<p>He ho he trobat ja que he deixat dos arxius anteriors per a fer espai. He calculat que no podre ni desà cap imatge i sí, tinc raó, ja que he sobrepassat el límit del directori. 
<img alt="Comanda" src="../imatges/imatge128.png" /></p>
<h2 id="copies-de-seguretat-i-automatitzacio-de-tasques_1">Còpies de seguretat i automatització de tasques</h2>
<h3 id="1teoria">1.Teoria</h3>
<h4 id="11copies-de-seguretat-fer-una-taula-comparativa">1.1Còpies de seguretat (fer una taula comparativa)</h4>
<table>
<thead>
<tr>
<th><strong>Tipus</strong></th>
<th><strong>Descripció</strong></th>
<th><strong>Avantatges</strong></th>
<th><strong>Desavantatges</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Completes</strong></td>
<td>És realitza una copia de tot.</td>
<td>No es deixa cap arxiu,es a dir, es fa una copia de tot.</td>
<td>Al fer estes copies completes utilitza molt d'espai i tarda molt de temps per fer les copies ja que en fa de tot.</td>
</tr>
<tr>
<td><strong>Diferencials</strong></td>
<td>Una diferencial copia la diferencia sempre a partir de la ultima completa</td>
<td>És molt útil per a copies que es fan seqüentcialment ja que utiliza menys espai i tarda menys que una completa.</td>
<td>Necessita l'última completa i l'última diferencial (ja que fa com una diferencia entre la completa i la ultima diferencial).</td>
</tr>
<tr>
<td><strong>Incrementals</strong></td>
<td>Canvis des de l'última còpia (qualsevol).</td>
<td>ocupen menys espai i son molt més ràpides.</td>
<td>Necessita completa i totes les incrementals per restaurar.  Duplicity</td>
</tr>
</tbody>
</table>
<h3 id="2comandes">2.Comandes</h3>
<h4 id="31-explicacio">3.1 Explicació</h4>
<h4 id="32cp">3.2cp</h4>
<p>Es una copia simple no intel·ligent ho copio tot sense mirar res, ho fa tot en el local i no es pot fer remotament.</p>
<h4 id="33rsync">3.3rsync</h4>
<p>Copia intelligent només copia fitxers modificats i se pot utilitzar entre màquines remotes per ssh.</p>
<h4 id="34dd">3.4dd</h4>
<p>No és per a fer còpies de fitxers és més per a fer clonacions de particions o de discos.També treballa en local i ho copia tot és a dir que tampoc és intel·ligent.
Serveix per sobreescriu dades de sector a sector.Ja que ho esborra tot a nivell de bloc</p>
<h4 id="cppractica"><strong>CP(pràctica)</strong></h4>
<p>La comanda es cp -r /(origin) /(Destí). 
Podem observar que hem fet una copia de tot lo que es troba al directori /homw/ilyass/Descargas a la carpeta nova que hem creat.</p>
<p><img alt="Comanda" src="../imatges/imatge143.png" /></p>
<h4 id="rsync"><strong>rsync</strong></h4>
<p>Aquesta comanda el que fe es una copia exacta dels directoris, es a dir, borra fitxers que no es triben en el altre directori.</p>
<p>rsync -av --delete /home/alumne/Descargas/ /var/copies/</p>
<p>Podem observar que ens borra la carpeta de prova 2 ja que no es troba en /var/copies.</p>
<p><img alt="Comanda" src="../imatges/imatge144.png" /></p>
<h3 id="automatitzacio-amb-scripts-i-cron-i-anacron-automatitzacio-de-tasques-a-partir-scripts"><strong>Automatització amb scripts i cron i anacron( Automatització de tasques a partir scripts)</strong></h3>
<h4 id="diferencies-entre-anacron-i-cron">Diferencies entre anacron i cron</h4>
<p>Serveixen per automatitzar tasques en Ubuntu. Anteriorment funcionaven per separat, però ara estan integrats tots dos junts.</p>
<p>Si els ordinadors poden estar apagats, és millor utilitzar anacron, perquè cron executa només quan l'ordinador està encès. En canvi, anacron automatitza tasques quan l'ordinador està apagat, i quan s'encén revisa si té alguna tasca pendent i l'executa.</p>
<p>Utilitzarem anacron per a tasques de manteniment i generals.</p>
<p>En canvi, utilitzarem cron quan ens interessa executar una funció en una data exacta o per a un usuari específic.</p>
<p>Utilitzarem el fitxer /etc/crontab quan vulguem programar alguna cosa global per a tots els usuaris.</p>
<p>Quan ens interessi un usuari específic, executarem la comanda crontab -e -u(usuari).</p>
<p>Dins del directori /etc hi ha unes carpetes predeterminades per al cron, on podem posar scripts que es vulguin executar en una data exacta.</p>
<h4 id="practica"><strong>Pràctica</strong></h4>
<p>Creem un script per podeer provar com funciona aquesta pràctica i posem el codi següent.
Si posem /home/$USER en anacron no funciona i hem de posar el usuari especific.
<img alt="Comanda" src="../imatges/imatge1477.png" /></p>
<p>Cambiem els permisos a root.
<img alt="Comanda" src="../imatges/imatge1478.png" /></p>
<p>En el arxiu /etc/crontab posem que en en la fecha següent es faigue la clonació del directori "imágines"
<img alt="Comanda" src="../imatges/imatge1479.png" /></p>
<p>Aqui podem observar que ens ha fet la clonació en el la hora 10:26.
<img alt="Comanda" src="../imatges/imatge14710.png" /></p>
<p>Ara el que farem es borrar la data d'avui en el fitxer /etc/cron.daily. 
En primer lloc passem la script copies.sh
<img alt="Comanda" src="../imatges/imatge14712.png" /></p>
<p>Ara borrem el .sh per a no tenir confusions.
<img alt="Comanda" src="../imatges/imatge14713.png" /></p>
<p>Borrem el que hi ha dins de cron.daily
<img alt="Comanda" src="../imatges/imatge14714.png" /></p>
<p>Cambiem de 5 a 1 per a que nomes tarde 1 min per a que ens pose la fecha en el cron.daily
<img alt="Comanda" src="../imatges/imatge14715.png" /></p>
<p>Esperem el minut i ja podem veure que ja tenim la fecha diaria.
<img alt="Comanda" src="../imatges/imatge14716.png" /></p></div>
                <footer>
    <div class="footer-buttons">
        <div class="previous"><a href="../introduccio/" title="Introducción"><span>Previous</span></a></div>
        <div class="next"><a href="../sprint3/" title="Sprint 3"><span>Next</span></a></div>
    </div>
    <div class="footer-note">
        <p>
            Built with <a href="http://www.mkdocs.org">MkDocs</a> using
            <a href="https://github.com/daizutabi/mkdocs-ivory">Ivory theme</a>.
        </p>
    </div>
</footer>
            </div>
        </main>
    </div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
    <script src="../search/main.js"></script>
</body>

</html>